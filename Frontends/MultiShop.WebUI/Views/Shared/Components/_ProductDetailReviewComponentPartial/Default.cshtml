@model List<ResultCommentDTO>
@{
    var pid = (string)ViewData["ProductId"];
    var yorumSayisi = Model?.Count ?? 0;
}

<div class="tab-pane fade" id="tab-pane-3">
    <div class="row">
        
              <div class="col-md-6">
<h4 class="mb-4">Bu Ürün İçin @yorumSayisi Yorum Bulunmaktadır..</h4>

@if (yorumSayisi > 0)
{
    @* güvenli foreach *@
    @foreach (var item in Model)
    {
            <div class="media mb-4">
                <img src="@item.UserCommentImageURL" alt="Image" class="img-fluid mr-3 mt-1" style="width: 45px;">
                <div class="media-body">
                    <h6>@item.UserCommentNameSurname<small> - <i>@item.UserCommentCreatedDate.ToShortDateString()</i></small></h6>
                        @if(item.UserCommentRating==1)
                        {
                            <div class="text-primary mb-2">
                                <i class="fas fa-star"></i>
                            </div>
                        }
                        else if(item.UserCommentRating==2)
                        {
                            <div class="text-primary mb-2">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        }
                        else if(item.UserCommentRating==3)
                        {
                            <div class="text-primary mb-2">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        }
                        else if(item.UserCommentRating==4)
                        {
                            <div class="text-primary mb-2">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        }
                        else if(item.UserCommentRating==5)
                        {
                            <div class="text-primary mb-2">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        }

                        <p>@item.UserCommentDetail</p>

                </div>
                    
            </div>
            }
            }
            else
            {
                <div class="text-muted">Bu ürüne henüz yorum yapılmamış.</div>
            }
        </div>
        @await Html.PartialAsync(
        "~/Views/ProductList/AddComment.cshtml",
                new MultiShop.DTOLayer.CommentDTOs.CreateCommentDTO { ProductID = pid }
                )

      
      
    </div>
</div>