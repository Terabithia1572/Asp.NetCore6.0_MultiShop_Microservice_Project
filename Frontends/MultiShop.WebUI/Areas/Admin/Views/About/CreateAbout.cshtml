@{
    ViewData["Title"] = "Yeni Hakkımda Bilgisi Ekle";
    Layout = "~/Areas/Admin/Views/Shared/_AdminDashboardLayout.cshtml";
}

<div class="d-flex align-items-center justify-content-between mb-4">
    <div>
        <h4 class="fw-semibold mb-1 text-dark">
            <i class="fa-solid fa-user-plus text-warning me-2"></i>Yeni Hakkımda Bilgisi Ekle
        </h4>
        <div class="text-muted">Hakkınızda açıklama, adres, mail ve telefon bilgilerini ekleyebilirsiniz.</div>
    </div>
    <a href="/Admin/About/Index" class="btn btn-light border shadow-sm">
        <i class="fa-solid fa-arrow-left me-1"></i> Geri Dön
    </a>
</div>

<div class="fade-in" style="max-width:850px;margin:auto;">
    <form asp-action="CreateAbout" method="post" id="createForm">
        <div class="card border-0 shadow-sm p-4 rounded-3 bg-white">
            <div class="row g-3">
                <div class="col-md-12">
                    <label class="form-label fw-semibold">Açıklama</label>
                    <textarea name="AboutDescription" class="form-control shadow-sm" rows="3" placeholder="Kendiniz veya markanız hakkında açıklama..." required></textarea>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-semibold">Adres</label>
                    <input name="AboutAddress" class="form-control shadow-sm" placeholder="Adres giriniz..." />
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-semibold">E-posta</label>
                    <input name="AboutEmail" type="email" class="form-control shadow-sm" placeholder="E-posta adresiniz..." />
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-semibold">Telefon</label>
                    <input name="AboutPhone" class="form-control shadow-sm" placeholder="Telefon numaranız..." />
                </div>
            </div>

            <div class="text-end mt-4">
                <button type="submit" class="btn btn-warning text-dark fw-semibold shadow-sm px-4 py-2">
                    <i class="fa-solid fa-check me-1"></i> Kaydet
                </button>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.getElementById("createForm").addEventListener("submit", async function (e) {
            e.preventDefault();

            const fd = new FormData(this);
            const res = await fetch("/Admin/About/CreateAboutAjax", { method: "POST", body: fd });
            const data = await res.json();

            if (!data.success) {
                Swal.fire({
                    icon: "warning",
                    title: "İşlem Engellendi",
                    text: data.message,
                    confirmButtonColor: "#ffc107"
                });
                return;
            }

            Swal.fire({
                icon: "success",
                title: "Eklendi!",
                text: data.message,
                timer: 1500,
                showConfirmButton: false
            }).then(() => window.location.href = "/Admin/About/Index");
        });

        document.querySelector('.fade-in').style.opacity = 0;
        setTimeout(() => {
            document.querySelector('.fade-in').style.transition = 'opacity .6s ease';
            document.querySelector('.fade-in').style.opacity = 1;
        }, 150);
    </script>
}
